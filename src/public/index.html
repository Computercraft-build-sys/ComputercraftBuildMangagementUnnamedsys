<html>
    <head>
        <link rel="stylesheet" href="style/base.css"/>
        <link rel="stylesheet" href="style/index.css"/>
        <link rel="stylesheet" href="theme/dark.css"/>
        <title>Ferret</title>

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono&family=Kaushan+Script&family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&display=swap" rel="stylesheet">
    </head>
    <body>
        <script>
            function sendButtonClickToServer(id) {
                fetch("/buttonclickfortesting", {
                    method: "POST",
                    body: id
                })
            }
        </script>

        <header>
            <h1>ferret <span id="network_id">(network id...)</span>
                <button id="signout" onclick="signout()" class="soft_button">
                    <svg id = "signout_image" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M1 3V1.5C1 1.22386 1.22386 1 1.5 1H4.5C4.77614 1 5 1.22386 5 1.5V6.5C5 6.77614 4.77614 7 4.5 7H1.5C1.22386 7 1 6.77614 1 6.5V5M0 4H2.5M3.5 4L2.5 3V5L3.5 4Z" stroke="black" stroke-width="1"/>
                    </svg>
                </button>
            </h1>
            <p id="server_stats">loading stats...</p>
        </header>

        <content>
            <h2>Computers</h2>
            <div class="indented-container">
                <table id="computers_list">
                </table>
            </div>
    
            <h2>Packages</h2>
            <div class="indented-container">
                <table id="packages_list">
                </table>
                <table id="add_package">
                    <tr>
                        <td>Name: <input id="add_package_name" autocomplete="one-time-code"/></td>
                        <td>Files (csv): <input id="add_package_files" autocomplete="one-time-code"/></td>
                        <td><button id="add_package_button" onclick="submitNewPackage()">Add</button></td>
                    </tr>
                </table>
            </div>
    
            <h2>Install Script</h2>
            <input id="install_command" readonly autocomplete="one-time-code"></input>
            <button onclick="copyInstallCommand()">
                Copy
            </button>
    
            <p>
                TODO:
                --save data to file--
                --local source--
                --package creation and deletion--
    
                optimise: send data to client either as a single thing or push data
    
                add toasts and better handling for partial network definitions 
                
                prettier style
                better toast types
    
                abstract graph and io to server in panel management
                check abs filepath in client
                fix task not logging
            </p>
        </content>

        <script src="https://unpkg.com/@popperjs/core@2"></script>
        <script src="https://unpkg.com/tippy.js@6"></script>

        <script src="script/auth.js"></script>
        <script src="script/api_socket.js"></script>
        <script src="script/lib/table.js"></script>
        <script src="script/page/index.js"></script>
    </body>
</html>
